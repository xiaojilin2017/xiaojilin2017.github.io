<!DOCTYPE html>
<html class="theme theme-white">
<head>
<meta charset="utf-8">
<title>《Unity Shader入门精要》FAQ</title>
<link href="https://www.zybuluo.com/static/assets/template-theme-white.css" rel="stylesheet" media="screen">
<style type="text/css">

#wmd-preview h1  {
    color: #0077bb; /* 将标题改为蓝色 */
}</style>
</head>
<body class="theme theme-white">
<div style="visibility: hidden; overflow: hidden; position: absolute; top: 0px; height: 1px; width: auto; padding: 0px; border: 0px; margin: 0px; text-align: left; text-indent: 0px; text-transform: none; line-height: normal; letter-spacing: normal; word-spacing: normal;"><div id="MathJax_SVG_Hidden"></div><svg><defs id="MathJax_SVG_glyphs"><path id="MJMATHI-6E" stroke-width="1" d="M21 287Q22 293 24 303T36 341T56 388T89 425T135 442Q171 442 195 424T225 390T231 369Q231 367 232 367L243 378Q304 442 382 442Q436 442 469 415T503 336T465 179T427 52Q427 26 444 26Q450 26 453 27Q482 32 505 65T540 145Q542 153 560 153Q580 153 580 145Q580 144 576 130Q568 101 554 73T508 17T439 -10Q392 -10 371 17T350 73Q350 92 386 193T423 345Q423 404 379 404H374Q288 404 229 303L222 291L189 157Q156 26 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 112 180T152 343Q153 348 153 366Q153 405 129 405Q91 405 66 305Q60 285 60 284Q58 278 41 278H27Q21 284 21 287Z"></path><path id="MJMAIN-5C" stroke-width="1" d="M56 731Q56 740 62 745T75 750Q85 750 92 740Q96 733 270 255T444 -231Q444 -239 438 -244T424 -250Q414 -250 407 -240Q404 -236 230 242T56 731Z"></path><path id="MJMAIN-63" stroke-width="1" d="M370 305T349 305T313 320T297 358Q297 381 312 396Q317 401 317 402T307 404Q281 408 258 408Q209 408 178 376Q131 329 131 219Q131 137 162 90Q203 29 272 29Q313 29 338 55T374 117Q376 125 379 127T395 129H409Q415 123 415 120Q415 116 411 104T395 71T366 33T318 2T249 -11Q163 -11 99 53T34 214Q34 318 99 383T250 448T370 421T404 357Q404 334 387 320Z"></path><path id="MJMAIN-72" stroke-width="1" d="M36 46H50Q89 46 97 60V68Q97 77 97 91T98 122T98 161T98 203Q98 234 98 269T98 328L97 351Q94 370 83 376T38 385H20V408Q20 431 22 431L32 432Q42 433 60 434T96 436Q112 437 131 438T160 441T171 442H174V373Q213 441 271 441H277Q322 441 343 419T364 373Q364 352 351 337T313 322Q288 322 276 338T263 372Q263 381 265 388T270 400T273 405Q271 407 250 401Q234 393 226 386Q179 341 179 207V154Q179 141 179 127T179 101T180 81T180 66V61Q181 59 183 57T188 54T193 51T200 49T207 48T216 47T225 47T235 46T245 46H276V0H267Q249 3 140 3Q37 3 28 0H20V46H36Z"></path><path id="MJMAIN-6F" stroke-width="1" d="M28 214Q28 309 93 378T250 448Q340 448 405 380T471 215Q471 120 407 55T250 -10Q153 -10 91 57T28 214ZM250 30Q372 30 372 193V225V250Q372 272 371 288T364 326T348 362T317 390T268 410Q263 411 252 411Q222 411 195 399Q152 377 139 338T126 246V226Q126 130 145 91Q177 30 250 30Z"></path><path id="MJMAIN-73" stroke-width="1" d="M295 316Q295 356 268 385T190 414Q154 414 128 401Q98 382 98 349Q97 344 98 336T114 312T157 287Q175 282 201 278T245 269T277 256Q294 248 310 236T342 195T359 133Q359 71 321 31T198 -10H190Q138 -10 94 26L86 19L77 10Q71 4 65 -1L54 -11H46H42Q39 -11 33 -5V74V132Q33 153 35 157T45 162H54Q66 162 70 158T75 146T82 119T101 77Q136 26 198 26Q295 26 295 104Q295 133 277 151Q257 175 194 187T111 210Q75 227 54 256T33 318Q33 357 50 384T93 424T143 442T187 447H198Q238 447 268 432L283 424L292 431Q302 440 314 448H322H326Q329 448 335 442V310L329 304H301Q295 310 295 316Z"></path><path id="MJMAIN-31" stroke-width="1" d="M213 578L200 573Q186 568 160 563T102 556H83V602H102Q149 604 189 617T245 641T273 663Q275 666 285 666Q294 666 302 660V361L303 61Q310 54 315 52T339 48T401 46H427V0H416Q395 3 257 3Q121 3 100 0H88V46H114Q136 46 152 46T177 47T193 50T201 52T207 57T213 61V578Z"></path><path id="MJMAIN-2F" stroke-width="1" d="M423 750Q432 750 438 744T444 730Q444 725 271 248T92 -240Q85 -250 75 -250Q68 -250 62 -245T56 -231Q56 -221 230 257T407 740Q411 750 423 750Z"></path><path id="MJMATHI-63" stroke-width="1" d="M34 159Q34 268 120 355T306 442Q362 442 394 418T427 355Q427 326 408 306T360 285Q341 285 330 295T319 325T330 359T352 380T366 386H367Q367 388 361 392T340 400T306 404Q276 404 249 390Q228 381 206 359Q162 315 142 235T121 119Q121 73 147 50Q169 26 205 26H209Q321 26 394 111Q403 121 406 121Q410 121 419 112T429 98T420 83T391 55T346 25T282 0T202 -11Q127 -11 81 37T34 159Z"></path><path id="MJMATHI-72" stroke-width="1" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path id="MJMATHI-6F" stroke-width="1" d="M201 -11Q126 -11 80 38T34 156Q34 221 64 279T146 380Q222 441 301 441Q333 441 341 440Q354 437 367 433T402 417T438 387T464 338T476 268Q476 161 390 75T201 -11ZM121 120Q121 70 147 48T206 26Q250 26 289 58T351 142Q360 163 374 216T388 308Q388 352 370 375Q346 405 306 405Q243 405 195 347Q158 303 140 230T121 120Z"></path><path id="MJMATHI-73" stroke-width="1" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z"></path><path id="MJMAIN-2D9" stroke-width="1" d="M190 609Q190 637 208 653T252 669Q275 667 292 652T309 609Q309 579 292 564T250 549Q225 549 208 564T190 609Z"></path></defs></svg></div><div id="wmd-preview" class="wmd-preview wmd-preview-full-reader"><div class="md-section-divider"></div><div class="md-section-divider"></div><h2 data-anchor-id="65v4" id="unity-shader入门精要faq"><center>《Unity Shader入门精要》FAQ</center></h2><hr><p data-anchor-id="mmkb">说明：本页面是书籍《Unity Shader入门精要》的读者问答集锦，也包含了一些读者的建议，我们可能会据此来更新下一版中的相关内容，欢迎读者反馈。 <br>
作者：冯乐乐 <br>
邮箱：lelefeng1992@gmail.com <br>
更新日期：2016年7月25日</p><hr><p data-anchor-id="eijd"><strong>Q1：关于Unity Shader中_WorldSpaceLightPos0的意义。在漫反射的计算公式中，光源方向I被定义成一个指向光源的向量，也就是说，相对于某一顶点，是由该顶点指向光源，我将之理解成了光源的反方向不知是否正确。我不是很清楚光源方向是如何由_WorldSpaceLightPos0来得到的。</strong></p><p data-anchor-id="hfrv">A1：光照模型里面的光源方向的确是由顶点指向光源的，而且需要归一化。在Unity中，如果是平行光，_WorldSpaceLightPos0存的就是这个光源方向了，Unity传进来的已经是根据这个角度计算而得的方向值了。此时光源方向跟顶点位置没有任何关系，因为它的方向是固定的。我们可以尝试自己在C#里根据平行光的Rotation计算一个角度，这个方向可以理解是把模型空间下的Z轴经过Rotation变换后的世界空间下的一个单位矢量，再对该方向取反得到。如果是其他光源类型，那么这个值就是世界空间里的位置，那么光源方向自然就是该位置值减去顶点位置，再归一化。</p><p data-anchor-id="tkpv"><strong>Q2：在第一版的P34页中写到“表面着色器不需要开发者关心使用多少个Pass，每个Pass如何渲染等问题”，表面着色器不可以支持自定义的多Pass吗？</strong></p><p data-anchor-id="awxp">A2：实际上，利用一些dirty trick我们的确可以在表面着色器中实现自定义多个Pass。我们既可以定义多个表面着色器，还可以把表面着色器和顶点/片元着色器混用，但我们认为这样的Shader不易阅读和管理。</p><p data-anchor-id="e7c6">参考： <br>
* <a href="http://answers.unity3d.com/questions/354774/multiple-pass-surface-shader.html" target="_blank">http://answers.unity3d.com/questions/354774/multiple-pass-surface-shader.html</a> <br>
* <a href="http://answers.unity3d.com/questions/610316/multipass-surface-shader-or-equivalent.html" target="_blank">http://answers.unity3d.com/questions/610316/multipass-surface-shader-or-equivalent.html</a></p><p data-anchor-id="bd79"><strong>Q3：我感觉法线贴图那里讲的有点不清楚，我觉得<a href="http://www.cnblogs.com/flytrace/p/3387748.html" target="_blank">这篇文章</a>不错，希望可以借鉴一些。</strong></p><p data-anchor-id="t5mv">A3：书的7.2节的确缺少一些关于法线纹理的起因、原理等方面的讲解，会在后续版本中加强。</p><p data-anchor-id="og5u"><strong>Q4：我不理解下图红框中的内容，是如何由左侧的式子变换过来的？</strong></p><p></p><center data-anchor-id="2akj"><img src="http://static.zybuluo.com/candycat/hxh7hf6b0e46qgxlgiz0leba/image_1aog7fo441ui816jvobc1lan141f9.png" alt="image_1aog7fo441ui816jvobc1lan141f9.png-102.1kB"></center><p></p><p data-anchor-id="ae57">A4：该行的第一个公式是矢量点乘，读者可以注意到中间有个黑点。然后，为了推导到矩阵计算中，我们把矢量运算替换成了<strong>等价的矩阵乘法</strong>。因为本书默认矢量可以当成是列矩阵，所以第二个公式就是把它们当成列矩阵进行矩阵乘法，这样一来两个矢量就都被当成是n x 1的列矩阵。转置是因为矩阵乘法有行列规则，不转置的话这个乘法是没法进行的，不符合矩阵乘法定义。读者可以在纸上画一画，红框内的矩阵乘法结果也是一个标量，和第一个矢量点乘的结果是相同的。</p><p data-anchor-id="t5sg"><strong>Q5：书中第四章中说观察空间是右手坐标系，但是我在Unity中看到的“观察空间”是左手坐标系，如何理解？</strong></p><p data-anchor-id="ugnz">A5：读者在Unity中并不能直观地看到观察空间。读者这里所谓的“观察空间”应该是点击场景中的Camera物体后、在Scene视图下看到的坐标轴，这个坐标轴表示的并不是观察空间，而是Camera这个物体作为一个普通的Gameobject的模型空间，它当然是左手坐标系。观察空间是无法在Unity中通过可视化的方式看到的，读者会在调用Camera.worldToCameraMatrix等API计算观察空间下的坐标时体会到该空间是右手坐标系的。</p></div>
</body>
</html>
